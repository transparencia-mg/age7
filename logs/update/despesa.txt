Traceback (most recent call last):
  File "/usr/local/bin/dpckan", line 8, in <module>
    sys.exit(cli())
  File "/usr/local/lib/python3.9/site-packages/click/core.py", line 1130, in __call__
    return self.main(*args, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/click/core.py", line 1055, in main
    rv = self.invoke(ctx)
  File "/usr/local/lib/python3.9/site-packages/click/core.py", line 1657, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/usr/local/lib/python3.9/site-packages/click/core.py", line 1657, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/usr/local/lib/python3.9/site-packages/click/core.py", line 1404, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/usr/local/lib/python3.9/site-packages/click/core.py", line 760, in invoke
    return __callback(*args, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/click/decorators.py", line 26, in new_func
    return f(get_current_context(), *args, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/dpckan/update_dataset.py", line 21, in update_cli
    update(
  File "/usr/local/lib/python3.9/site-packages/dpckan/update_dataset.py", line 13, in update
    dataset_update(ckan_instance, package, datastore, exit_code)
  File "/usr/local/lib/python3.9/site-packages/dpckan/functions.py", line 136, in dataset_update
    different_resources = dataset_diff(ckan_instance, datapackage)
  File "/usr/local/lib/python3.9/site-packages/dpckan/functions.py", line 167, in dataset_diff
    resource_diff = get_resource_diff(ckan_instance, datapackage, resource_name, resource_id)
  File "/usr/local/lib/python3.9/site-packages/dpckan/functions.py", line 190, in get_resource_diff
    resource_diff['data_diff'] = is_resource_data_diff(ckan_instance,
  File "/usr/local/lib/python3.9/site-packages/dpckan/functions.py", line 205, in is_resource_data_diff
    ckan_data_hash = resource_url_hash(ckan_instance, resource_id)
  File "/usr/local/lib/python3.9/site-packages/dpckan/functions.py", line 246, in resource_url_hash
    ckan_datapackage = ckan_instance.action.package_show(id=ckan_datapackage_resource['package_id'])
  File "/usr/local/lib/python3.9/site-packages/ckanapi/common.py", line 51, in action
    return self._ckan.call_action(name, data_dict=kwargs)
  File "/usr/local/lib/python3.9/site-packages/ckanapi/remoteckan.py", line 97, in call_action
    return reverse_apicontroller_action(url, status, response)
  File "/usr/local/lib/python3.9/site-packages/ckanapi/common.py", line 134, in reverse_apicontroller_action
    raise CKANAPIError(repr([url, status, response]))
ckanapi.errors.CKANAPIError: ['https://dados.mg.gov.br/api/action/package_show', 500, '<!DOCTYPE html>\n<!--[if IE 9]> <html lang="pt_BR" class="ie9"> <![endif]-->\n<!--[if gt IE 8]><!--> <html lang="pt_BR"> <!--<![endif]-->\n  <head>\n    <meta charset="utf-8" />\n      <meta name="generator" content="ckan 2.9.5" />\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Erro [500] - Portal de Dados Abertos do Estado de Minas Gerais</title>\n\n    \n    \n    <link rel="shortcut icon" href="/base/images/ckan.ico" />\n    \n    \n        <script type="text/javascript">\n  (function(i,s,o,g,r,a,m){i[\'GoogleAnalyticsObject\']=r;i[r]=i[r]||function(){\n  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n  })(window,document,\'script\',\'//www.google-analytics.com/analytics.js\',\'ga\');\n\n  ga(\'create\', \'UA-64127876-2\', \'auto\', {});\n  \n  ga(\'set\', \'anonymizeIp\', true);\n  ga(\'send\', \'pageview\');\n</script>\n    \n\n    \n      \n      \n      \n      \n    \n    \n    \n\n\n    \n      \n      \n    \n\n    \n    <link href="/webassets/base/eb9793eb_red.css" rel="stylesheet"/>\n<link href="/webassets/ckanext-geoview/77c3ca23_geo-resource-styles.css" rel="stylesheet"/><style>\n        .featured.media-overlay.hidden-xs{\r\ndisplay:none;\r\n}\n      </style>\n    \n  </head>\n\n  \n  <body data-site-root="https://dados.mg.gov.br/" data-locale-root="https://dados.mg.gov.br/" >\n\n    \n    <div class="sr-only sr-only-focusable"><a href="#content">Pular para o conteúdo</a></div>\n  \n\n  \n     \n<div class="account-masthead">\n  <div class="container">\n     \n    <nav class="account not-authed" aria-label="Account">\n      <ul class="list-unstyled">\n        \n        <li><a href="/user/login">Entrar</a></li>\n         \n      </ul>\n    </nav>\n     \n  </div>\n</div>\n\n<header class="navbar navbar-static-top masthead">\n    \n  <div class="container">\n    <div class="navbar-right">\n      <button data-target="#main-navigation-toggle" data-toggle="collapse" class="navbar-toggle collapsed" type="button" aria-label="expand or collapse" aria-expanded="false">\n        <span class="sr-only">Toggle navigation</span>\n        <span class="fa fa-bars"></span>\n      </button>\n    </div>\n    <hgroup class="header-text-logo navbar-left">\n       \n      <h1>\n        <a href="/">Portal de Dados Abertos do Estado de Minas Gerais</a>\n      </h1>\n        \n    </hgroup>\n\n    <div class="collapse navbar-collapse" id="main-navigation-toggle">\n      \n      <nav class="section navigation">\n        <ul class="nav nav-pills">\n            \n\t\t<li><a href="/dataset/">Conjuntos de dados</a></li><li><a href="/organization/">Organizações</a></li><li><a href="/group/">Grupos</a></li><li><a href="/about">Sobre</a></li>\n\t    \n        </ul>\n      </nav>\n       \n      <form class="section site-search simple-input" action="/dataset/" method="get">\n        <div class="field">\n          <label for="field-sitewide-search">Buscar conjunto de dados</label>\n          <input id="field-sitewide-search" type="text" class="form-control" name="q" placeholder="Pesquisar" aria-label="Search datasets"/>\n          <button class="btn-search" type="submit" aria-label="Submit"><i class="fa fa-search"></i></button>\n        </div>\n      </form>\n      \n    </div>\n  </div>\n</header>\n\n  \n    <div class="main">\n      <div id="content" class="container">\n        \n          \n  \n  \n\n\n          \n            <div class="toolbar" role="navigation" aria-label="Breadcrumb">\n              \n\n            </div>\n          \n\n          <div class="row wrapper no-nav">\n            \n            \n            \n\n            \n\n            \n  <article class="module">\n    <div class="module-content">\n      \n      Internal server error\n    </div>\n  </article>\n\n          </div>\n        \n      </div>\n    </div>\n  \n    <footer class="site-footer">\n  <div class="container">\n    \n    <div class="row">\n      <div class="col-md-8 footer-links">\n        \n          <ul class="list-unstyled">\n            \n              <li><a href="/about">Sobre Portal de Dados Abertos do Estado de Minas Gerais</a></li>\n            \n          </ul>\n          <ul class="list-unstyled">\n            \n              \n              <li><a href="http://docs.ckan.org/en/2.9/api/">API do CKAN</a></li>\n              <li><a href="http://www.ckan.org/">Associação CKAN</a></li>\n              <li><a href="http://www.opendefinition.org/okd/"><img src="/base/images/od_80x15_blue.png" alt="Open Data"></a></li>\n            \n          </ul>\n        \n      </div>\n      <div class="col-md-4 attribution">\n        \n          <p><strong>Impulsionado por</strong> <a class="hide-text ckan-footer-logo" href="http://ckan.org">CKAN</a></p>\n        \n        \n          \n<form class="form-inline form-select lang-select" action="/util/redirect" data-module="select-switch" method="POST">\n  <label for="field-lang-select">Idioma</label>\n  <select id="field-lang-select" name="url" data-module="autocomplete" data-module-dropdown-class="lang-dropdown" data-module-container-class="lang-container">\n    \n      <option value="/pt_BR/api/action/package_show" selected="selected">\n        português (Brasil)\n      </option>\n    \n      <option value="/en/api/action/package_show" >\n        English\n      </option>\n    \n      <option value="/ja/api/action/package_show" >\n        日本語\n      </option>\n    \n      <option value="/it/api/action/package_show" >\n        italiano\n      </option>\n    \n      <option value="/cs_CZ/api/action/package_show" >\n        čeština (Česko)\n      </option>\n    \n      <option value="/ca/api/action/package_show" >\n        català\n      </option>\n    \n      <option value="/es/api/action/package_show" >\n        español\n      </option>\n    \n      <option value="/fr/api/action/package_show" >\n        français\n      </option>\n    \n      <option value="/el/api/action/package_show" >\n        Ελληνικά\n      </option>\n    \n      <option value="/sv/api/action/package_show" >\n        svenska\n      </option>\n    \n      <option value="/sr/api/action/package_show" >\n        српски\n      </option>\n    \n      <option value="/no/api/action/package_show" >\n        norsk bokmål (Norge)\n      </option>\n    \n      <option value="/sk/api/action/package_show" >\n        slovenčina\n      </option>\n    \n      <option value="/fi/api/action/package_show" >\n        suomi\n      </option>\n    \n      <option value="/ru/api/action/package_show" >\n        русский\n      </option>\n    \n      <option value="/de/api/action/package_show" >\n        Deutsch\n      </option>\n    \n      <option value="/pl/api/action/package_show" >\n        polski\n      </option>\n    \n      <option value="/nl/api/action/package_show" >\n        Nederlands\n      </option>\n    \n      <option value="/bg/api/action/package_show" >\n        български\n      </option>\n    \n      <option value="/ko_KR/api/action/package_show" >\n        한국어 (대한민국)\n      </option>\n    \n      <option value="/hu/api/action/package_show" >\n        magyar\n      </option>\n    \n      <option value="/sl/api/action/package_show" >\n        slovenščina\n      </option>\n    \n      <option value="/lv/api/action/package_show" >\n        latviešu\n      </option>\n    \n      <option value="/ne/api/action/package_show" >\n        नेपाली\n      </option>\n    \n      <option value="/gl/api/action/package_show" >\n        galego\n      </option>\n    \n      <option value="/da_DK/api/action/package_show" >\n        dansk (Danmark)\n      </option>\n    \n      <option value="/am/api/action/package_show" >\n        አማርኛ\n      </option>\n    \n      <option value="/ar/api/action/package_show" >\n        العربية\n      </option>\n    \n      <option value="/pt_PT/api/action/package_show" >\n        português (Portugal)\n      </option>\n    \n      <option value="/uk/api/action/package_show" >\n        українська\n      </option>\n    \n      <option value="/mk/api/action/package_show" >\n        македонски\n      </option>\n    \n      <option value="/mn_MN/api/action/package_show" >\n        монгол (Монгол)\n      </option>\n    \n      <option value="/vi/api/action/package_show" >\n        Tiếng Việt\n      </option>\n    \n      <option value="/es_AR/api/action/package_show" >\n        español (Argentina)\n      </option>\n    \n      <option value="/tr/api/action/package_show" >\n        Türkçe\n      </option>\n    \n      <option value="/zh_Hans_CN/api/action/package_show" >\n        中文 (简体, 中国)\n      </option>\n    \n      <option value="/zh_Hant_TW/api/action/package_show" >\n        中文 (繁體, 台灣)\n      </option>\n    \n      <option value="/en_AU/api/action/package_show" >\n        English (Australia)\n      </option>\n    \n      <option value="/my_MM/api/action/package_show" >\n        မြန်မာ (မြန်မာ)\n      </option>\n    \n      <option value="/ro/api/action/package_show" >\n        română\n      </option>\n    \n      <option value="/fa_IR/api/action/package_show" >\n        فارسی (ایران)\n      </option>\n    \n      <option value="/he/api/action/package_show" >\n        עברית\n      </option>\n    \n      <option value="/km/api/action/package_show" >\n        ខ្មែរ\n      </option>\n    \n      <option value="/th/api/action/package_show" >\n        ไทย\n      </option>\n    \n      <option value="/sq/api/action/package_show" >\n        shqip\n      </option>\n    \n      <option value="/hr/api/action/package_show" >\n        hrvatski\n      </option>\n    \n      <option value="/lt/api/action/package_show" >\n        lietuvių\n      </option>\n    \n      <option value="/id/api/action/package_show" >\n        Indonesia\n      </option>\n    \n      <option value="/sr_Latn/api/action/package_show" >\n        srpski (latinica)\n      </option>\n    \n      <option value="/uk_UA/api/action/package_show" >\n        українська (Україна)\n      </option>\n    \n      <option value="/tl/api/action/package_show" >\n        Filipino (Pilipinas)\n      </option>\n    \n      <option value="/eu/api/action/package_show" >\n        euskara\n      </option>\n    \n      <option value="/is/api/action/package_show" >\n        íslenska\n      </option>\n    \n  </select>\n  <button class="btn btn-default js-hide" type="submit">Ir</button>\n</form>\n        \n      </div>\n    </div>\n    \n  </div>\n\n  \n    \n  \n</footer>\n  \n  \n  \n  \n  \n    \n    \n    \n        \n        \n        <div class="js-hide" data-module="google-analytics"\n             data-module-googleanalytics_resource_prefix="/downloads/">\n        </div>\n    \n\n\n      \n\n    \n    \n    <link href="/webassets/vendor/f3b8236b_select2.css" rel="stylesheet"/>\n<link href="/webassets/vendor/0b01aef1_font-awesome.css" rel="stylesheet"/>\n    <script src="/webassets/vendor/d8ae4bed_jquery.js" type="text/javascript"></script>\n<script src="/webassets/vendor/fb6095a0_vendor.js" type="text/javascript"></script>\n<script src="/webassets/vendor/580fa18d_bootstrap.js" type="text/javascript"></script>\n<script src="/webassets/base/15a18f6c_main.js" type="text/javascript"></script>\n<script src="/webassets/base/266988e1_ckan.js" type="text/javascript"></script>\n<script src="/webassets/ckanext-googleanalytics/event_tracking.js?04320bc0" type="text/javascript"></script>\n  </body>\n</html>']
